<!DOCTYPE html>
<html lang="bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>spasi-urgent-signals-hub</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta http-equiv="Content-Language" content="bg" />

    <meta property="og:title" content="spasi-urgent-signals-hub" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- PWA related meta tags -->
    <meta name="theme-color" content="#0a0a0a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Спаси БГ" />
    
    <!-- Critical CSS inlined for faster rendering -->
    <style>
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow: hidden; /* Prevent initial scrolling */
      }
      
      #loading-spinner {
        position: fixed; 
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #0a0a0a; /* Match dark theme background */
        z-index: 9999; /* Ensure it's on top */
      }
      
      #loading-spinner img {
        max-width: 100px; /* Limit logo size */
        opacity: 0.7; /* Slightly fade the logo */
        animation: pulse 1.5s infinite; /* Optional subtle pulse animation */
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(0.95); }
      }
    </style>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/lovable-uploads/8db7f922-f5d9-4a9a-a53a-f93967d704dd.png" as="image" type="image/png" />
    <link rel="preload" href="/lovable-uploads/67305523-c36e-48e8-b434-fbcbd7931232.png" as="image" type="image/png" />
    <link rel="preload" href="/lovable-uploads/9ebf9964-e102-4d6e-866b-63884dc1f10f.png" as="image" type="image/png" />
    
    <!-- Preload core CSS & JS -->
    <link rel="preload" href="/src/index.css" as="style" />
    <link rel="preload" href="/src/main.tsx" as="script" type="text/javascript" crossorigin />
    
    <!-- Manifest link for PWA -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Apple touch icons -->
    <link rel="apple-touch-icon" href="/apple-icon-180.png" />
    
    <!-- Updated favicon to use the uploaded image -->
    <link rel="icon" href="/lovable-uploads/9ebf9964-e102-4d6e-866b-63884dc1f10f.png" type="image/png">
  </head>

  <body>
    <div id="root">
      <!-- Initial loading indicator to improve perceived performance -->
      <div id="loading-spinner">
        <img src="/lovable-uploads/9ebf9964-e102-4d6e-866b-63884dc1f10f.png" alt="Зареждане..." />
      </div>
    </div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    
    <!-- Service Worker Registration with instant updates -->
    <script>
      if ('serviceWorker' in navigator) {
        // Register service worker immediately
        navigator.serviceWorker.register('/sw.js')
          .then(function(reg) {
            console.log('Service worker registered.', reg);
            
            // Check for service worker updates on page load
            reg.update();
            
            // Listen for control changes that indicate a new service worker has activated
            navigator.serviceWorker.addEventListener('controllerchange', () => {
              console.log('New service worker activated');
            });
          }).catch(function(error) {
            console.log('Service worker registration failed:', error);
          });
          
        // Function to request the service worker to clear caches
        window.clearCaches = function() {
          if (navigator.serviceWorker.controller) {
            navigator.serviceWorker.controller.postMessage({
              action: 'clearCaches'
            });
          }
        };
        
        // Function to force refresh the page after a new deployment
        window.forceRefresh = function() {
          if (navigator.serviceWorker.controller) {
            navigator.serviceWorker.controller.postMessage({
              action: 'skipWaiting'
            });
            window.location.reload();
          }
        };
      }
      
      // Remove loading spinner once the React app has loaded
      window.addEventListener('load', function() {
        const loadingSpinner = document.getElementById('loading-spinner');
        if (loadingSpinner) {
          setTimeout(() => {
            loadingSpinner.style.opacity = '0';
            loadingSpinner.style.transition = 'opacity 0.3s ease';
            setTimeout(() => {
              loadingSpinner.remove();
            }, 300);
          }, 200);
        }
      });
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
